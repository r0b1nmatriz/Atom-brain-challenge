
{% extends "layout.html" %}

{% block title %}Enroll Now{% endblock %}

{% block content %}
<div class="splash-screen">
    <div class="splash-content">
        <h1>Welcome to Atom Brain Challenge</h1>
        <div class="splash-price">₹99</div>
        <div class="splash-features">
            <p>✨ Access to Premium Questions</p>
            <p>🏆 Chance to Win iPhone 16 Pro</p>
            <p>📊 Detailed Performance Analysis</p>
        </div>
        <button onclick="initiatePayment()" class="btn btn-primary btn-lg mt-4">
            <i class="fas fa-bolt me-2"></i> Pay ₹99 & Start Quiz
        </button>
    </div>
</div>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
function initiatePayment() {
    fetch('/process_enrollment', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        }
    })
    .then(response => response.json())
    .then(data => {
        var options = {
            key: data.key,
            amount: data.amount,
            currency: data.currency,
            order_id: data.order_id,
            name: 'Atom Brain Challenge',
            description: 'Quiz Enrollment',
            handler: function(response) {
                window.location.href = '/quiz';
            },
            prefill: {
                name: '',
                email: '',
                contact: ''
            },
            theme: {
                color: '#38bdf8'
            }
        };
        var rzp = new Razorpay(options);
        rzp.open();
    })
    .catch(error => console.error('Error:', error));
}
</script>
{% endblock %}
